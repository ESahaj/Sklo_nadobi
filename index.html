<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CHEMICK√â SKLO A N√ÅDOB√ç ‚Äì hra</title>
<style>
body {
  font-family: Arial, sans-serif;
  min-height: 100vh;
  margin: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  background:
    radial-gradient(circle at 20% 30%, rgba(46,204,113,0.15), transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(52,152,219,0.15), transparent 40%),
    linear-gradient(135deg, #eef6ff, #f9fffb);
}

.container {
  background: rgba(255,255,255,0.95);
  padding: 25px 35px 35px;
  border-radius: 18px;
  max-width: 900px;
  width: 100%;
  box-shadow: 0 20px 40px rgba(0,0,0,0.12);
  text-align: center;
}

.atom { font-size:42px; margin-bottom:10px; text-align:center; }

h1,h2 { color:#2c3e50; }

.images {
  display: flex;
  gap: 40px;
  justify-content: center;
  margin: 30px 0;
  flex-wrap: nowrap;
}

.images img {
  width: 45%;
  max-width: 320px;
  border-radius:14px;
  border:3px solid #ddd;
  padding:6px;
  cursor:pointer;
  transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
  touch-action: manipulation;
}

.images img:hover { transform:scale(1.03); }

.correct { border-color:#2ecc71; box-shadow:0 0 0 4px rgba(46,204,113,0.4); }
.wrong   { border-color:#e74c3c; box-shadow:0 0 0 4px rgba(231,76,60,0.4); }

button {
  display:none;
  margin:0 auto 30px;
  padding:12px 34px;
  border-radius:999px;
  border:none;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  background: linear-gradient(135deg,#3498db,#2ecc71);
  color:white;
}

button:hover {
  transform:translateY(-1px);
  box-shadow:0 12px 25px rgba(0,0,0,0.25);
}

.review-section { margin-top:40px; }
.review-row {
  display:flex;
  flex-wrap:wrap;
  gap:20px;
  justify-content:center;
}
.review-item {
  width:160px;
  margin-bottom:20px;
  text-align:center;
}
.review-item img { width:100%; border-radius:10px; border:3px solid #ddd; }
.good img { border-color:#2ecc71; }
.bad img { border-color:#e74c3c; }

#retryBtn { display:block; margin:0 auto 30px; }

@media (max-width: 600px) {
  body { padding: 10px; }
  .container { padding: 20px 15px 25px; border-radius: 14px; }
  h1 { font-size: 22px; }
  .atom { font-size: 34px; }
  .images { gap: 20px; flex-wrap: nowrap; }
  .images img { width: 48%; max-width: 48%; }
  .review-item { width: 140px; }
}

@media (max-width: 400px) {
  h1 { font-size: 20px; }
  .review-item { width: 120px; }
}
</style>
</head>
<body>

<div class="container" id="app">
  <div class="atom">üß™SKLO & N√ÅDOB√ç</div>
  <h1 id="question"></h1>

  <div class="images">
    <img id="img1" onclick="choose(0)">
    <img id="img2" onclick="choose(1)">
  </div>

  <button id="nextBtn" onclick="nextQuestion()">Dal≈°√≠</button>
  <div id="resultsContainer"></div>
</div>

<script>
const allQuestions = [
{text:"Alon≈æ", images:["obrazky/chladic.jpg","obrazky/alonz.jpg"], correct:1},
{text:"Byreta", images:["obrazky/byreta.jpg","obrazky/delena_pipeta.jpg"], correct:0},
{text:"Chladiƒç", images:["obrazky/promyvacka.jpg","obrazky/chladic.jpg"], correct:1},
{text:"Dƒõlen√° pipeta", images:["obrazky/pipeta_nedelena.jpg","obrazky/delena_pipeta.jpg"], correct:1},
{text:"Dƒõlen√° pipeta", images:["obrazky/delena_pipeta.jpg","obrazky/pipeta_nedelena.jpg"], correct:0},
{text:"Dƒõlic√≠ n√°levka", images:["obrazky/nalevka.jpg","obrazky/delici_nalevka.jpg"], correct:1},
{text:"Dr≈æ√°k na zkumavky", images:["obrazky/drzak.jpg","obrazky/stojan_zkumavek.jpg"], correct:0},
{text:"Exsik√°tor", images:["obrazky/u_trubice.jpg","obrazky/exsikator.jpg"], correct:1},
{text:"Erlenmayerova ba≈àka", images:["obrazky/kuzelova_banka.jpg","obrazky/frakcni_banka.jpg"], correct:0},
{text:"Frakƒçn√≠ ba≈àka", images:["obrazky/frakcni_banka.jpg","obrazky/odsavaci_banka.jpg"], correct:0},
{text:"K√°dinka", images:["obrazky/kuzelova_banka.jpg","obrazky/kadinka.jpg"], correct:1},
{text:"Kahan", images:["obrazky/zelezny_kruh.jpg","obrazky/kahan.jpg"], correct:1},
{text:"≈Ω√≠hac√≠ kel√≠mek", images:["obrazky/kelimek.jpg","obrazky/lodicka.jpg"], correct:0},
{text:"Ku≈æelov√° ba≈àka", images:["obrazky/frakcni_banka.jpg","obrazky/kuzelova_banka.jpg"], correct:1},
{text:"Nava≈æovac√≠ lodiƒçka", images:["obrazky/lodicka.jpg","obrazky/alonz.jpg"], correct:0},
{text:"N√°levka", images:["obrazky/nalevka.jpg","obrazky/odmerna_banka.jpg"], correct:0},
{text:"Odmƒõrn√° ba≈àka", images:["obrazky/odmerny_valec.jpg","obrazky/odmerna_banka.jpg"], correct:1},
{text:"Odmƒõrn√Ω v√°lec", images:["obrazky/odmerny_valec.jpg","obrazky/delena_pipeta.jpg"], correct:0},
{text:"Ods√°vac√≠ ba≈àka", images:["obrazky/odsavaci_banka.jpg","obrazky/frakcni_banka.jpg"], correct:0},
{text:"Nedƒõlen√° pipeta", images:["obrazky/lodicka.jpg","obrazky/pipeta_nedelena.jpg"], correct:0},
{text:"Prom√Ωvaƒçka", images:["obrazky/exsikator.jpg","obrazky/promyvacka.jpg"], correct:1},
{text:"Stojan na zkumavky", images:["obrazky/drzak.jpg","obrazky/stojan_zkumavek.jpg"], correct:1},
{text:"St≈ôiƒçka", images:["obrazky/promyvacka.jpg","obrazky/stricka.jpg"], correct:1},
{text:"Svorka", images:["obrazky/drzak.jpg","obrazky/svorka.jpg"], correct:1},
{text:"T≈ôec√≠ miska s tlouƒçkem", images:["obrazky/lodicka.jpg","obrazky/treci_miska.jpg"], correct:1},
{text:"N√°levka", images:["obrazky/nalevka.jpg","obrazky/delici_nalevka.jpg"], correct:0},
{text:"U-trubice", images:["obrazky/kelimek.jpg","obrazky/u_trubice.jpg"], correct:1},
{text:"Sklenƒõn√° vana", images:["obrazky/vana.jpg","obrazky/stojan_zkumavek.jpg"], correct:0},
{text:"≈Ωelezn√Ω kruh", images:["obrazky/triangl.jpg","obrazky/zelezny_kruh.jpg"], correct:1},
{text:"Zkumavka", images:["obrazky/u_trubice.jpg","obrazky/zkumavka.jpg"], correct:1}
];

let questions = [];
let current = 0;
let results = [];
let answered = false;

const questionEl = document.getElementById("question");
const img1 = document.getElementById("img1");
const img2 = document.getElementById("img2");
const nextBtn = document.getElementById("nextBtn");
const resultsContainer = document.getElementById("resultsContainer");

function startNewRound(){
  const uniqueQuestionsMap = new Map();
  allQuestions.forEach(q => {
    if (!uniqueQuestionsMap.has(q.text)) uniqueQuestionsMap.set(q.text, q);
  });

  const uniqueQuestions = Array.from(uniqueQuestionsMap.values());
  questions = shuffle(uniqueQuestions).slice(0, 10);

  // n√°hodnƒõ prohazujeme obr√°zky pro ka≈ædou ot√°zku jen jednou
  questions = questions.map(q => {
    let newQ = {...q, images:[...q.images]}; // kopie
    if(Math.random() > 0.5){
      [newQ.images[0], newQ.images[1]] = [newQ.images[1], newQ.images[0]];
      newQ.correct = newQ.correct === 0 ? 1 : 0;
    }
    return newQ;
  });

  current = 0;
  results = [];
  answered = false;
  resultsContainer.innerHTML = "";
  img1.className = "";
  img2.className = "";
  questionEl.style.display = "block";
  img1.style.display = "inline-block";
  img2.style.display = "inline-block";
  nextBtn.style.display = "none";

  loadQuestion();
}

function loadQuestion(){
  const q = questions[current];
  questionEl.textContent = q.text;
  img1.src = q.images[0];
  img2.src = q.images[1];
  img1.className = "";
  img2.className = "";
  answered = false;
  nextBtn.style.display = "none";
}

function choose(option){
  if(answered) return;
  answered = true;
  const q = questions[current];
  if(q.correct===0) img1.classList.add("correct");
  if(q.correct===1) img2.classList.add("correct");
  if(option!==q.correct) (option===0?img1:img2).classList.add("wrong");

  results.push({
    question:q.text,
    correctImg:q.images[q.correct],
    chosenImg:q.images[option],
    isCorrect:option===q.correct
  });

  nextBtn.style.display = "block";
}

function nextQuestion(){
  current++;
  if(current<questions.length) loadQuestion();
  else showResults();
}

function showResults(){
  questionEl.style.display = "none";
  img1.style.display = "none";
  img2.style.display = "none";
  nextBtn.style.display = "none";

  const errors = results.filter(r=>!r.isCorrect).length;

  let html = `<button id="retryBtn" onclick="startNewRound()">Vypracuj znovu</button>`;
  html += `<h2>V√Ωsledky</h2>
           <p style="text-align:center;font-size:18px">
           Spr√°vnƒõ: ${results.length-errors} / ${results.length}<br>
           Chyby: ${errors}</p>`;

  html += `<div class="review-section"><h3>‚úÖ Spr√°vn√© odpovƒõdi</h3><div class="review-row">`;
  results.forEach(r => {
    html += `<div class="review-item good"><strong>${r.question}</strong><img src="${r.correctImg}"></div>`;
  });
  html += `</div></div>`;

  html += `<div class="review-section"><h3>‚ùå ≈†patn√© odpovƒõdi</h3><div class="review-row">`;
  results.filter(r=>!r.isCorrect).forEach(r=>{
    html += `<div class="review-item bad"><strong>${r.question}</strong><img src="${r.chosenImg}"></div>`;
  });
  html += `</div></div>`;

  resultsContainer.innerHTML = html;
}

startNewRound();
</script>

</body>
</html>
